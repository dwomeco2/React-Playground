import{S as Tt,s as ht,n as nr,i as pt,b as mt,t as ir,f as ar,c as or,d as yt,e as cr,g as ie,h as vt,k as ur,r as I,u as Ct,p as lr,R as dr,l as Ae,j as b}from"./index-dba73a28.js";class jt extends Tt{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),gt(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return rt(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return rt(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const s=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),ht(s,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.updateQuery();const i=this.hasListeners();i&&_t(this.currentQuery,n,this.options,s)&&this.executeFetch(),this.updateResult(t),i&&(this.currentQuery!==n||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&this.updateStaleTimeout();const a=this.computeRefetchInterval();i&&(this.currentQuery!==n||this.options.enabled!==s.enabled||a!==this.currentRefetchInterval)&&this.updateRefetchInterval(a)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e);return this.createResult(t,e)}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(s),e[s])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),s=this.client.getQueryCache().build(this.client,t);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(nr)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),pt||this.currentResult.isStale||!mt(this.options.staleTime))return;const t=ir(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(pt||this.options.enabled===!1||!mt(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||ar.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const s=this.currentQuery,n=this.options,i=this.currentResult,a=this.currentResultState,o=this.currentResultOptions,l=e!==s,c=l?e.state:this.currentQueryInitialState,f=l?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:w,error:C,errorUpdatedAt:P,fetchStatus:z,status:D}=h,J=!1,K=!1,L;if(t._optimisticResults){const u=this.hasListeners(),y=!u&&gt(e,t),v=u&&_t(e,s,t,n);(y||v)&&(z=or(e.options.networkMode)?"fetching":"paused",w||(D="loading")),t._optimisticResults==="isRestoring"&&(z="idle")}if(t.keepPreviousData&&!h.dataUpdatedAt&&f!=null&&f.isSuccess&&D!=="error")L=f.data,w=f.dataUpdatedAt,D=f.status,J=!0;else if(t.select&&typeof h.data<"u")if(i&&h.data===(a==null?void 0:a.data)&&t.select===this.selectFn)L=this.selectResult;else try{this.selectFn=t.select,L=t.select(h.data),L=yt(i==null?void 0:i.data,L,t),this.selectResult=L,this.selectError=null}catch(u){this.selectError=u}else L=h.data;if(typeof t.placeholderData<"u"&&typeof L>"u"&&D==="loading"){let u;if(i!=null&&i.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData))u=i.data;else if(u=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof u<"u")try{u=t.select(u),this.selectError=null}catch(y){this.selectError=y}typeof u<"u"&&(D="success",L=yt(i==null?void 0:i.data,u,t),K=!0)}this.selectError&&(C=this.selectError,L=this.selectResult,P=Date.now(),D="error");const X=z==="fetching",ee=D==="loading",j=D==="error";return{status:D,fetchStatus:z,isLoading:ee,isSuccess:D==="success",isError:j,isInitialLoading:ee&&X,data:L,dataUpdatedAt:w,error:C,errorUpdatedAt:P,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:X,isRefetching:X&&!ee,isLoadingError:j&&h.dataUpdatedAt===0,isPaused:z==="paused",isPlaceholderData:K,isPreviousData:J,isRefetchError:j&&h.dataUpdatedAt!==0,isStale:ft(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,s=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,ht(s,t))return;this.currentResult=s;const n={cache:!0},i=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options;if(a==="all"||!a&&!this.trackedProps.size)return!0;const o=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&o.add("error"),Object.keys(this.currentResult).some(l=>{const c=l;return this.currentResult[c]!==t[c]&&o.has(c)})};(e==null?void 0:e.listeners)!==!1&&i()&&(n.listeners=!0),this.notify({...n,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!cr(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){ie.batch(()=>{if(e.onSuccess){var t,s,n,i;(t=(s=this.options).onSuccess)==null||t.call(s,this.currentResult.data),(n=(i=this.options).onSettled)==null||n.call(i,this.currentResult.data,null)}else if(e.onError){var a,o,l,c;(a=(o=this.options).onError)==null||a.call(o,this.currentResult.error),(l=(c=this.options).onSettled)==null||l.call(c,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(f=>{f(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function fr(r,e){return e.enabled!==!1&&!r.state.dataUpdatedAt&&!(r.state.status==="error"&&e.retryOnMount===!1)}function gt(r,e){return fr(r,e)||r.state.dataUpdatedAt>0&&rt(r,e,e.refetchOnMount)}function rt(r,e,t){if(e.enabled!==!1){const s=typeof t=="function"?t(r):t;return s==="always"||s!==!1&&ft(r,e)}return!1}function _t(r,e,t,s){return t.enabled!==!1&&(r!==e||s.enabled===!1)&&(!t.suspense||r.state.status!=="error")&&ft(r,t)}function ft(r,e){return r.isStaleByTime(e.staleTime)}class hr extends Tt{constructor(e,t){super(),this.client=e,this.queries=[],this.result=[],this.observers=[],this.observersMap={},t&&this.setQueries(t)}onSubscribe(){this.listeners.length===1&&this.observers.forEach(e=>{e.subscribe(t=>{this.onUpdate(e,t)})})}onUnsubscribe(){this.listeners.length||this.destroy()}destroy(){this.listeners=[],this.observers.forEach(e=>{e.destroy()})}setQueries(e,t){this.queries=e,ie.batch(()=>{const s=this.observers,n=this.findMatchingObservers(this.queries);n.forEach(c=>c.observer.setOptions(c.defaultedQueryOptions,t));const i=n.map(c=>c.observer),a=Object.fromEntries(i.map(c=>[c.options.queryHash,c])),o=i.map(c=>c.getCurrentResult()),l=i.some((c,f)=>c!==s[f]);s.length===i.length&&!l||(this.observers=i,this.observersMap=a,this.result=o,this.hasListeners()&&(vt(s,i).forEach(c=>{c.destroy()}),vt(i,s).forEach(c=>{c.subscribe(f=>{this.onUpdate(c,f)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(e=>e.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(e){return this.findMatchingObservers(e).map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions))}findMatchingObservers(e){const t=this.observers,s=e.map(h=>this.client.defaultQueryOptions(h)),n=s.flatMap(h=>{const w=t.find(C=>C.options.queryHash===h.queryHash);return w!=null?[{defaultedQueryOptions:h,observer:w}]:[]}),i=n.map(h=>h.defaultedQueryOptions.queryHash),a=s.filter(h=>!i.includes(h.queryHash)),o=t.filter(h=>!n.some(w=>w.observer===h)),l=h=>{const w=this.client.defaultQueryOptions(h),C=this.observersMap[w.queryHash];return C??new jt(this.client,w)},c=a.map((h,w)=>{if(h.keepPreviousData){const C=o[w];if(C!==void 0)return{defaultedQueryOptions:h,observer:C}}return{defaultedQueryOptions:h,observer:l(h)}}),f=(h,w)=>s.indexOf(h.defaultedQueryOptions)-s.indexOf(w.defaultedQueryOptions);return n.concat(c).sort(f)}onUpdate(e,t){const s=this.observers.indexOf(e);s!==-1&&(this.result=ur(this.result,s,t),this.notify())}notify(){ie.batch(()=>{this.listeners.forEach(e=>{e(this.result)})})}}var st={},pr={get exports(){return st},set exports(r){st=r}},It={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ye=I;function mr(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var yr=typeof Object.is=="function"?Object.is:mr,vr=ye.useState,gr=ye.useEffect,_r=ye.useLayoutEffect,br=ye.useDebugValue;function xr(r,e){var t=e(),s=vr({inst:{value:t,getSnapshot:e}}),n=s[0].inst,i=s[1];return _r(function(){n.value=t,n.getSnapshot=e,Ke(n)&&i({inst:n})},[r,t,e]),gr(function(){return Ke(n)&&i({inst:n}),r(function(){Ke(n)&&i({inst:n})})},[r]),br(t),t}function Ke(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!yr(r,t)}catch{return!0}}function kr(r,e){return e()}var wr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kr:xr;It.useSyncExternalStore=ye.useSyncExternalStore!==void 0?ye.useSyncExternalStore:wr;(function(r){r.exports=It})(pr);const Nt=st.useSyncExternalStore,Zt=I.createContext(!1),At=()=>I.useContext(Zt);Zt.Provider;function Sr(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}const Rr=I.createContext(Sr()),Mt=()=>I.useContext(Rr);function Er(r,e){return typeof r=="function"?r(...e):!!r}const Pt=(r,e)=>{(r.suspense||r.useErrorBoundary)&&(e.isReset()||(r.retryOnMount=!1))},Dt=r=>{I.useEffect(()=>{r.clearReset()},[r])},Lt=({result:r,errorResetBoundary:e,useErrorBoundary:t,query:s})=>r.isError&&!e.isReset()&&!r.isFetching&&Er(t,[r.error,s]),Qt=r=>{r.suspense&&typeof r.staleTime!="number"&&(r.staleTime=1e3)},Vt=(r,e)=>r.isLoading&&r.isFetching&&!e,nt=(r,e,t)=>(r==null?void 0:r.suspense)&&Vt(e,t),it=(r,e,t)=>e.fetchOptimistic(r).then(({data:s})=>{r.onSuccess==null||r.onSuccess(s),r.onSettled==null||r.onSettled(s,null)}).catch(s=>{t.clearReset(),r.onError==null||r.onError(s),r.onSettled==null||r.onSettled(void 0,s)});function Or({queries:r,context:e}){const t=Ct({context:e}),s=At(),n=I.useMemo(()=>r.map(h=>{const w=t.defaultQueryOptions(h);return w._optimisticResults=s?"isRestoring":"optimistic",w}),[r,t,s]),[i]=I.useState(()=>new hr(t,n)),a=i.getOptimisticResult(n);Nt(I.useCallback(h=>s?()=>{}:i.subscribe(ie.batchCalls(h)),[i,s]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),I.useEffect(()=>{i.setQueries(n,{listeners:!1})},[n,i]);const o=Mt();n.forEach(h=>{Pt(h,o),Qt(h)}),Dt(o);const c=a.some((h,w)=>nt(n[w],h,s))?a.flatMap((h,w)=>{const C=n[w],P=i.getObservers()[w];if(C&&P){if(nt(C,h,s))return it(C,P,o);Vt(h,s)&&it(C,P,o)}return[]}):[];if(c.length>0)throw Promise.all(c);const f=a.find((h,w)=>{var C,P;return Lt({result:h,errorResetBoundary:o,useErrorBoundary:(C=(P=n[w])==null?void 0:P.useErrorBoundary)!=null?C:!1,query:i.getQueries()[w]})});if(f!=null&&f.error)throw f.error;return a}function Tr(r,e){const t=Ct({context:r.context}),s=At(),n=Mt(),i=t.defaultQueryOptions(r);i._optimisticResults=s?"isRestoring":"optimistic",i.onError&&(i.onError=ie.batchCalls(i.onError)),i.onSuccess&&(i.onSuccess=ie.batchCalls(i.onSuccess)),i.onSettled&&(i.onSettled=ie.batchCalls(i.onSettled)),Qt(i),Pt(i,n),Dt(n);const[a]=I.useState(()=>new e(t,i)),o=a.getOptimisticResult(i);if(Nt(I.useCallback(l=>s?()=>{}:a.subscribe(ie.batchCalls(l)),[a,s]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),I.useEffect(()=>{a.setOptions(i,{listeners:!1})},[i,a]),nt(i,o,s))throw it(i,a,n);if(Lt({result:o,errorResetBoundary:n,useErrorBoundary:i.useErrorBoundary,query:a.getCurrentQuery()}))throw o.error;return i.notifyOnChangeProps?o:a.trackResult(o)}function Ut(r,e,t){const s=lr(r,e,t);return Tr(s,jt)}let Cr=0;function jr(r,e){const t=`atom${++Cr}`,s={toString:()=>t};return typeof r=="function"?s.read=r:(s.init=r,s.read=n=>n(s),s.write=(n,i,a)=>i(s,typeof a=="function"?a(n(s)):a)),e&&(s.write=e),s}const Ye=r=>"init"in r,Ge=r=>!!r.write,Le=new WeakMap,Ir=(r,e)=>{Le.set(r,e),r.catch(()=>{}).finally(()=>Le.delete(r))},bt=(r,e)=>{const t=Le.get(r);t&&(Le.delete(r),t(e))},xt=(r,e)=>{r.status="fulfilled",r.value=e},kt=(r,e)=>{r.status="rejected",r.reason=e},Me=(r,e)=>"v"in r&&"v"in e&&Object.is(r.v,e.v),wt=(r,e)=>"e"in r&&"e"in e&&Object.is(r.e,e.e),Xe=r=>"v"in r&&r.v instanceof Promise,Pe=r=>{if("e"in r)throw r.e;return r.v},Nr=()=>{const r=new WeakMap,e=new WeakMap,t=new Map;let s,n,i;({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&(s=new Set,n=new Set,i=new Set);const a=u=>r.get(u),o=(u,y)=>{({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&Object.freeze(y);const v=r.get(u);if(r.set(u,y),t.has(u)||t.set(u,v),v&&Xe(v)){const _="v"in y?y.v instanceof Promise?y.v:Promise.resolve(y.v):Promise.reject(y.e);bt(v.v,_)}},l=(u,y,v)=>{const _=new Map;let E=!1;v.forEach(T=>{const Z=T===u?y:a(T);Z?(_.set(T,Z),y.d.get(T)!==Z&&(E=!0)):({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] atom state not found")}),(E||y.d.size!==_.size)&&(y.d=_)},c=(u,y,v)=>{const _=a(u),E={d:(_==null?void 0:_.d)||new Map,v:y};return v&&l(u,E,v),_&&Me(_,E)&&_.d===E.d?_:(o(u,E),E)},f=(u,y,v)=>{const _=a(u),E={d:(_==null?void 0:_.d)||new Map,e:y};return v&&l(u,E,v),_&&wt(_,E)&&_.d===E.d?_:(o(u,E),E)},h=u=>{const y=a(u);if(y&&(y.d.forEach((M,$)=>{$!==u&&!e.has($)&&h($)}),Array.from(y.d).every(([M,$])=>M===u||a(M)===$)))return y;const v=new Set;let _=!0;const E=M=>{if(v.add(M),M===u){const U=a(M);if(U)return Pe(U);if(Ye(M))return M.init;throw new Error("no atom init")}const $=h(M);return Pe($)};let T,Z;const Ze={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!Ge(u)&&console.warn("setSelf function cannot be used with read-only atom"),!Z&&Ge(u)&&(Z=(...M)=>{if(({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&_&&console.warn("setSelf function cannot be called in sync"),!_)return K(u,...M)}),Z}};try{const M=u.read(E,Ze);if(M instanceof Promise){let $;const U=new Promise((be,sr)=>{let he=!1;M.then(se=>{he||(he=!0,c(u,U,v),xt(U,se),be(se))},se=>{he||(he=!0,c(u,U,v),kt(U,se),sr(se))}),$=se=>{he||(he=!0,se.then(Je=>xt(U,Je),Je=>kt(U,Je)),be(se))}});return U.status="pending",Ir(U,be=>{be&&$(be),T==null||T.abort()}),c(u,U,v)}return c(u,M,v)}catch(M){return f(u,M,v)}finally{_=!1}},w=u=>Pe(h(u)),C=u=>{let y=e.get(u);return y||(y=L(u)),y},P=(u,y)=>!y.l.size&&(!y.t.size||y.t.size===1&&y.t.has(u)),z=u=>{const y=e.get(u);y&&P(u,y)&&X(u)},D=u=>{const y=e.get(u);y==null||y.t.forEach(v=>{if(v!==u){const _=a(v),E=h(v);(!_||!Me(_,E))&&D(v)}})},J=(u,...y)=>{let v=!0;const _=Z=>Pe(h(Z)),E=(Z,...Ze)=>{let M;if(Z===u){if(!Ye(Z))throw new Error("atom not writable");const $=a(Z),U=c(Z,Ze[0]);(!$||!Me($,U))&&D(Z)}else M=J(Z,...Ze);return v||j(),M},T=u.write(_,E,...y);return v=!1,T},K=(u,...y)=>{const v=J(u,...y);return j(),v},L=(u,y)=>{const v={t:new Set(y&&[y]),l:new Set};if(e.set(u,v),({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&i.add(u),h(u).d.forEach((_,E)=>{const T=e.get(E);T?T.t.add(u):E!==u&&L(E,u)}),h(u),Ge(u)&&u.onMount){const _=u.onMount((...E)=>K(u,...E));_&&(v.u=_)}return v},X=u=>{var y;const v=(y=e.get(u))==null?void 0:y.u;v&&v(),e.delete(u),({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&i.delete(u);const _=a(u);_?(Xe(_)&&bt(_.v),_.d.forEach((E,T)=>{if(T!==u){const Z=e.get(T);Z&&(Z.t.delete(u),P(T,Z)&&X(T))}})):({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] could not find atom state to unmount",u)},ee=(u,y,v)=>{const _=new Set(y.d.keys());v==null||v.forEach((E,T)=>{if(_.has(T)){_.delete(T);return}const Z=e.get(T);Z&&(Z.t.delete(u),P(T,Z)&&X(T))}),_.forEach(E=>{const T=e.get(E);T?T.t.add(u):e.has(u)&&L(E,u)})},j=()=>{for(;t.size;){const u=Array.from(t);t.clear(),u.forEach(([y,v])=>{const _=a(y);if(_){_.d!==(v==null?void 0:v.d)&&ee(y,_,v==null?void 0:v.d);const E=e.get(y);E&&!(v&&!Xe(v)&&(Me(v,_)||wt(v,_)))&&E.l.forEach(T=>T())}else({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] no atom state to flush")})}({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&(s.forEach(u=>u()),n.forEach(u=>u("state")))},B=(u,y)=>{const v=C(u);j();const _=v.l;return _.add(y),({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&n.forEach(E=>E("sub")),()=>{_.delete(y),z(u),({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&n.forEach(E=>E("unsub"))}};return({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"?{get:w,set:K,sub:B,dev_subscribe_state:u=>(console.warn("[DEPRECATED] dev_subscribe_state is deprecated and will be removed in the next minor version. use dev_subscribe_store instead."),s.add(u),()=>{s.delete(u)}),dev_subscribe_store:u=>(n.add(u),()=>{n.delete(u)}),dev_get_mounted_atoms:()=>i.values(),dev_get_atom_state:u=>r.get(u),dev_get_mounted:u=>e.get(u),dev_restore_atoms:u=>{for(const[y,v]of u)Ye(y)&&(c(y,v),D(y));j()}}:{get:w,set:K,sub:B}};let et;const Zr=()=>(et||(et=Nr()),et),Ar=I.createContext(void 0),$t=r=>{const e=I.useContext(Ar);return(r==null?void 0:r.store)||e||Zr()},Mr=r=>r instanceof Promise,Pr=dr.use||(r=>{if(r.status==="pending")throw r;if(r.status==="fulfilled")return r.value;throw r.status==="rejected"?r.reason:(r.status="pending",r.then(e=>{r.status="fulfilled",r.value=e},e=>{r.status="rejected",r.reason=e}),r)});function Dr(r,e){const t=$t(e),[[s,n,i],a]=I.useReducer(c=>{const f=t.get(r);return Object.is(c[0],f)&&c[1]===t&&c[2]===r?c:[f,t,r]},void 0,()=>[t.get(r),t,r]);let o=s;(n!==t||i!==r)&&(a(),o=t.get(r));const l=e==null?void 0:e.delay;return I.useEffect(()=>{const c=t.sub(r,()=>{if(typeof l=="number"){setTimeout(a,l);return}a()});return a(),c},[t,r,l]),I.useDebugValue(o),Mr(o)?Pr(o):o}function Lr(r,e){const t=$t(e);return I.useCallback((...n)=>{if(({BASE_URL:"/react-playground/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!("write"in r))throw new Error("not writable atom");return t.set(r,...n)},[t,r])}function Bt(r,e){return[Dr(r,e),Lr(r,e)]}var O;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const i={};for(const a of n)i[a]=a;return i},r.getValidEnumValues=n=>{const i=r.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(const o of i)a[o]=n[o];return r.objectValues(a)},r.objectValues=n=>r.objectKeys(n).map(function(i){return n[i]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.push(a);return i},r.find=(n,i)=>{for(const a of n)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=s,r.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(O||(O={}));var at;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(at||(at={}));const p=O.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ne=r=>{switch(typeof r){case"undefined":return p.undefined;case"string":return p.string;case"number":return isNaN(r)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"symbol":return p.symbol;case"object":return Array.isArray(r)?p.array:r===null?p.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?p.promise:typeof Map<"u"&&r instanceof Map?p.map:typeof Set<"u"&&r instanceof Set?p.set:typeof Date<"u"&&r instanceof Date?p.date:p.object;default:return p.unknown}},d=O.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Qr=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class F extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},s={_errors:[]},n=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}toString(){return this.message}get message(){return JSON.stringify(this.issues,O.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}F.create=r=>new F(r);const xe=(r,e)=>{let t;switch(r.code){case d.invalid_type:r.received===p.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case d.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,O.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:t=`Unrecognized key(s) in object: ${O.joinValues(r.keys,", ")}`;break;case d.invalid_union:t="Invalid input";break;case d.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${O.joinValues(r.options)}`;break;case d.invalid_enum_value:t=`Invalid enum value. Expected ${O.joinValues(r.options)}, received '${r.received}'`;break;case d.invalid_arguments:t="Invalid function arguments";break;case d.invalid_return_type:t="Invalid function return type";break;case d.invalid_date:t="Invalid date";break;case d.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:O.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case d.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case d.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case d.custom:t="Invalid input";break;case d.invalid_intersection_types:t="Intersection results could not be merged";break;case d.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case d.not_finite:t="Number must be finite";break;default:t=e.defaultError,O.assertNever(r)}return{message:t}};let zt=xe;function Vr(r){zt=r}function Qe(){return zt}const Ve=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,i=[...t,...n.path||[]],a={...n,path:i};let o="";const l=s.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:e,defaultError:o}).message;return{...n,path:i,message:n.message||o}},Ur=[];function m(r,e){const t=Ve({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Qe(),xe].filter(s=>!!s)});r.common.issues.push(t)}class Q{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return k;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t)s.push({key:await n.key,value:await n.value});return Q.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:i,value:a}=n;if(i.status==="aborted"||a.status==="aborted")return k;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),(typeof a.value<"u"||n.alwaysSet)&&(s[i.value]=a.value)}return{status:e.value,value:s}}}const k=Object.freeze({status:"aborted"}),qt=r=>({status:"dirty",value:r}),V=r=>({status:"valid",value:r}),ot=r=>r.status==="aborted",ct=r=>r.status==="dirty",Ue=r=>r.status==="valid",$e=r=>typeof Promise<"u"&&r instanceof Promise;var g;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(g||(g={}));class Y{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const St=(r,e)=>{if(Ue(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new F(r.common.issues);return this._error=t,this._error}}};function S(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:s??o.defaultError}:{message:t??o.defaultError},description:n}}class R{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ne(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ne(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Q,ctx:{common:e.parent.common,data:e.data,parsedType:ne(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if($e(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ne(e)},i=this._parseSync({data:e,path:n.path,parent:n});return St(n,i)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ne(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await($e(n)?n:Promise.resolve(n));return St(s,i)}refine(e,t){const s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,i)=>{const a=e(n),o=()=>i.addIssue({code:d.custom,...s(n)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new H({schema:this,typeName:x.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return te.create(this,this._def)}nullable(){return fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return W.create(this,this._def)}promise(){return ge.create(this,this._def)}or(e){return Re.create([this,e],this._def)}and(e){return Ee.create(this,e,this._def)}transform(e){return new H({...S(this._def),schema:this,typeName:x.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Ie({...S(this._def),innerType:this,defaultValue:t,typeName:x.ZodDefault})}brand(){return new Wt({typeName:x.ZodBranded,type:this,...S(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Fe({...S(this._def),innerType:this,catchValue:t,typeName:x.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Ne.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $r=/^c[^\s-]{8,}$/i,Br=/^[a-z][a-z0-9]*$/,zr=/[0-9A-HJKMNP-TV-Z]{26}/,qr=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Fr=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,Wr=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,Hr=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Jr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Kr=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Yr(r,e){return!!((e==="v4"||!e)&&Hr.test(r)||(e==="v6"||!e)&&Jr.test(r))}class q extends R{constructor(){super(...arguments),this._regex=(e,t,s)=>this.refinement(n=>e.test(n),{validation:t,code:d.invalid_string,...g.errToObj(s)}),this.nonempty=e=>this.min(1,g.errToObj(e)),this.trim=()=>new q({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new q({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new q({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.string){const i=this._getOrReturnCtx(e);return m(i,{code:d.invalid_type,expected:p.string,received:i.parsedType}),k}const s=new Q;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:d.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:d.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(n=this._getOrReturnCtx(e,n),a?m(n,{code:d.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&m(n,{code:d.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")Fr.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"email",code:d.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")Wr.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"emoji",code:d.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")qr.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"uuid",code:d.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")$r.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"cuid",code:d.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")Br.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"cuid2",code:d.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")zr.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"ulid",code:d.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),m(n,{validation:"url",code:d.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"regex",code:d.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),m(n,{code:d.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),m(n,{code:d.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),m(n,{code:d.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?Kr(i).test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{code:d.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="ip"?Yr(e.data,i.version)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"ip",code:d.invalid_string,message:i.message}),s.dirty()):O.assertNever(i);return{status:s.value,value:e.data}}_addCheck(e){return new q({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...g.errToObj(e)})}url(e){return this._addCheck({kind:"url",...g.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...g.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...g.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...g.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...g.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...g.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...g.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,...g.errToObj(e==null?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...g.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...g.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...g.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...g.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...g.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...g.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...g.errToObj(t)})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}q.create=r=>{var e;return new q({checks:[],typeName:x.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...S(r)})};function Gr(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,i=parseInt(r.toFixed(n).replace(".","")),a=parseInt(e.toFixed(n).replace(".",""));return i%a/Math.pow(10,n)}class ae extends R{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.number){const i=this._getOrReturnCtx(e);return m(i,{code:d.invalid_type,expected:p.number,received:i.parsedType}),k}let s;const n=new Q;for(const i of this._def.checks)i.kind==="int"?O.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),m(s,{code:d.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:d.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:d.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?Gr(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),m(s,{code:d.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),m(s,{code:d.not_finite,message:i.message}),n.dirty()):O.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,g.toString(t))}gt(e,t){return this.setLimit("min",e,!1,g.toString(t))}lte(e,t){return this.setLimit("max",e,!0,g.toString(t))}lt(e,t){return this.setLimit("max",e,!1,g.toString(t))}setLimit(e,t,s,n){return new ae({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:g.toString(n)}]})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:g.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:g.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:g.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:g.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:g.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&O.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ae.create=r=>new ae({checks:[],typeName:x.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...S(r)});class oe extends R{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==p.bigint){const i=this._getOrReturnCtx(e);return m(i,{code:d.invalid_type,expected:p.bigint,received:i.parsedType}),k}let s;const n=new Q;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:d.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:d.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),m(s,{code:d.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):O.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,g.toString(t))}gt(e,t){return this.setLimit("min",e,!1,g.toString(t))}lte(e,t){return this.setLimit("max",e,!0,g.toString(t))}lt(e,t){return this.setLimit("max",e,!1,g.toString(t))}setLimit(e,t,s,n){return new oe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:g.toString(n)}]})}_addCheck(e){return new oe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:g.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:g.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:g.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:g.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:g.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}oe.create=r=>{var e;return new oe({checks:[],typeName:x.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...S(r)})};class ke extends R{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.boolean){const s=this._getOrReturnCtx(e);return m(s,{code:d.invalid_type,expected:p.boolean,received:s.parsedType}),k}return V(e.data)}}ke.create=r=>new ke({typeName:x.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...S(r)});class le extends R{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.date){const i=this._getOrReturnCtx(e);return m(i,{code:d.invalid_type,expected:p.date,received:i.parsedType}),k}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return m(i,{code:d.invalid_date}),k}const s=new Q;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:d.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:d.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):O.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new le({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:g.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:g.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}le.create=r=>new le({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:x.ZodDate,...S(r)});class Be extends R{_parse(e){if(this._getType(e)!==p.symbol){const s=this._getOrReturnCtx(e);return m(s,{code:d.invalid_type,expected:p.symbol,received:s.parsedType}),k}return V(e.data)}}Be.create=r=>new Be({typeName:x.ZodSymbol,...S(r)});class we extends R{_parse(e){if(this._getType(e)!==p.undefined){const s=this._getOrReturnCtx(e);return m(s,{code:d.invalid_type,expected:p.undefined,received:s.parsedType}),k}return V(e.data)}}we.create=r=>new we({typeName:x.ZodUndefined,...S(r)});class Se extends R{_parse(e){if(this._getType(e)!==p.null){const s=this._getOrReturnCtx(e);return m(s,{code:d.invalid_type,expected:p.null,received:s.parsedType}),k}return V(e.data)}}Se.create=r=>new Se({typeName:x.ZodNull,...S(r)});class ve extends R{constructor(){super(...arguments),this._any=!0}_parse(e){return V(e.data)}}ve.create=r=>new ve({typeName:x.ZodAny,...S(r)});class ue extends R{constructor(){super(...arguments),this._unknown=!0}_parse(e){return V(e.data)}}ue.create=r=>new ue({typeName:x.ZodUnknown,...S(r)});class re extends R{_parse(e){const t=this._getOrReturnCtx(e);return m(t,{code:d.invalid_type,expected:p.never,received:t.parsedType}),k}}re.create=r=>new re({typeName:x.ZodNever,...S(r)});class ze extends R{_parse(e){if(this._getType(e)!==p.undefined){const s=this._getOrReturnCtx(e);return m(s,{code:d.invalid_type,expected:p.void,received:s.parsedType}),k}return V(e.data)}}ze.create=r=>new ze({typeName:x.ZodVoid,...S(r)});class W extends R{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==p.array)return m(t,{code:d.invalid_type,expected:p.array,received:t.parsedType}),k;if(n.exactLength!==null){const a=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(a||o)&&(m(t,{code:a?d.too_big:d.too_small,minimum:o?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(m(t,{code:d.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(m(t,{code:d.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>n.type._parseAsync(new Y(t,a,t.path,o)))).then(a=>Q.mergeArray(s,a));const i=[...t.data].map((a,o)=>n.type._parseSync(new Y(t,a,t.path,o)));return Q.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new W({...this._def,minLength:{value:e,message:g.toString(t)}})}max(e,t){return new W({...this._def,maxLength:{value:e,message:g.toString(t)}})}length(e,t){return new W({...this._def,exactLength:{value:e,message:g.toString(t)}})}nonempty(e){return this.min(1,e)}}W.create=(r,e)=>new W({type:r,minLength:null,maxLength:null,exactLength:null,typeName:x.ZodArray,...S(e)});function pe(r){if(r instanceof A){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=te.create(pe(s))}return new A({...r._def,shape:()=>e})}else return r instanceof W?new W({...r._def,type:pe(r.element)}):r instanceof te?te.create(pe(r.unwrap())):r instanceof fe?fe.create(pe(r.unwrap())):r instanceof G?G.create(r.items.map(e=>pe(e))):r}class A extends R{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=O.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==p.object){const c=this._getOrReturnCtx(e);return m(c,{code:d.invalid_type,expected:p.object,received:c.parsedType}),k}const{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof re&&this._def.unknownKeys==="strip"))for(const c in n.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const f=i[c],h=n.data[c];l.push({key:{status:"valid",value:c},value:f._parse(new Y(n,h,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof re){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of o)l.push({key:{status:"valid",value:f},value:{status:"valid",value:n.data[f]}});else if(c==="strict")o.length>0&&(m(n,{code:d.unrecognized_keys,keys:o}),s.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of o){const h=n.data[f];l.push({key:{status:"valid",value:f},value:c._parse(new Y(n,h,n.path,f)),alwaysSet:f in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of l){const h=await f.key;c.push({key:h,value:await f.value,alwaysSet:f.alwaysSet})}return c}).then(c=>Q.mergeObjectSync(s,c)):Q.mergeObjectSync(s,l)}get shape(){return this._def.shape()}strict(e){return g.errToObj,new A({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,i,a,o;const l=(a=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=g.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new A({...this._def,unknownKeys:"strip"})}passthrough(){return new A({...this._def,unknownKeys:"passthrough"})}extend(e){return new A({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new A({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:x.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new A({...this._def,catchall:e})}pick(e){const t={};return O.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new A({...this._def,shape:()=>t})}omit(e){const t={};return O.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new A({...this._def,shape:()=>t})}deepPartial(){return pe(this)}partial(e){const t={};return O.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new A({...this._def,shape:()=>t})}required(e){const t={};return O.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof te;)i=i._def.innerType;t[s]=i}}),new A({...this._def,shape:()=>t})}keyof(){return Ft(O.objectKeys(this.shape))}}A.create=(r,e)=>new A({shape:()=>r,unknownKeys:"strip",catchall:re.create(),typeName:x.ZodObject,...S(e)});A.strictCreate=(r,e)=>new A({shape:()=>r,unknownKeys:"strict",catchall:re.create(),typeName:x.ZodObject,...S(e)});A.lazycreate=(r,e)=>new A({shape:r,unknownKeys:"strip",catchall:re.create(),typeName:x.ZodObject,...S(e)});class Re extends R{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new F(o.ctx.common.issues));return m(t,{code:d.invalid_union,unionErrors:a}),k}if(t.common.async)return Promise.all(s.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(n);{let i;const a=[];for(const l of s){const c={...t,common:{...t.common,issues:[]},parent:null},f=l._parseSync({data:t.data,path:t.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new F(l));return m(t,{code:d.invalid_union,unionErrors:o}),k}}get options(){return this._def.options}}Re.create=(r,e)=>new Re({options:r,typeName:x.ZodUnion,...S(e)});const De=r=>r instanceof Te?De(r.schema):r instanceof H?De(r.innerType()):r instanceof Ce?[r.value]:r instanceof ce?r.options:r instanceof je?Object.keys(r.enum):r instanceof Ie?De(r._def.innerType):r instanceof we?[void 0]:r instanceof Se?[null]:null;class He extends R{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.object)return m(t,{code:d.invalid_type,expected:p.object,received:t.parsedType}),k;const s=this.discriminator,n=t.data[s],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(m(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),k)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const i of t){const a=De(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new He({typeName:x.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...S(s)})}}function ut(r,e){const t=ne(r),s=ne(e);if(r===e)return{valid:!0,data:r};if(t===p.object&&s===p.object){const n=O.objectKeys(e),i=O.objectKeys(r).filter(o=>n.indexOf(o)!==-1),a={...r,...e};for(const o of i){const l=ut(r[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(t===p.array&&s===p.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<r.length;i++){const a=r[i],o=e[i],l=ut(a,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return t===p.date&&s===p.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Ee extends R{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(i,a)=>{if(ot(i)||ot(a))return k;const o=ut(i.value,a.value);return o.valid?((ct(i)||ct(a))&&t.dirty(),{status:t.value,value:o.data}):(m(s,{code:d.invalid_intersection_types}),k)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,a])=>n(i,a)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Ee.create=(r,e,t)=>new Ee({left:r,right:e,typeName:x.ZodIntersection,...S(t)});class G extends R{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.array)return m(s,{code:d.invalid_type,expected:p.array,received:s.parsedType}),k;if(s.data.length<this._def.items.length)return m(s,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),k;!this._def.rest&&s.data.length>this._def.items.length&&(m(s,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Y(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(i).then(a=>Q.mergeArray(t,a)):Q.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new G({...this._def,rest:e})}}G.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new G({items:r,typeName:x.ZodTuple,rest:null,...S(e)})};class Oe extends R{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.object)return m(s,{code:d.invalid_type,expected:p.object,received:s.parsedType}),k;const n=[],i=this._def.keyType,a=this._def.valueType;for(const o in s.data)n.push({key:i._parse(new Y(s,o,s.path,o)),value:a._parse(new Y(s,s.data[o],s.path,o))});return s.common.async?Q.mergeObjectAsync(t,n):Q.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof R?new Oe({keyType:e,valueType:t,typeName:x.ZodRecord,...S(s)}):new Oe({keyType:q.create(),valueType:e,typeName:x.ZodRecord,...S(t)})}}class qe extends R{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.map)return m(s,{code:d.invalid_type,expected:p.map,received:s.parsedType}),k;const n=this._def.keyType,i=this._def.valueType,a=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new Y(s,o,s.path,[c,"key"])),value:i._parse(new Y(s,l,s.path,[c,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,f=await l.value;if(c.status==="aborted"||f.status==="aborted")return k;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),o.set(c.value,f.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,f=l.value;if(c.status==="aborted"||f.status==="aborted")return k;(c.status==="dirty"||f.status==="dirty")&&t.dirty(),o.set(c.value,f.value)}return{status:t.value,value:o}}}}qe.create=(r,e,t)=>new qe({valueType:e,keyType:r,typeName:x.ZodMap,...S(t)});class de extends R{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.set)return m(s,{code:d.invalid_type,expected:p.set,received:s.parsedType}),k;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(m(s,{code:d.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(m(s,{code:d.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function a(l){const c=new Set;for(const f of l){if(f.status==="aborted")return k;f.status==="dirty"&&t.dirty(),c.add(f.value)}return{status:t.value,value:c}}const o=[...s.data.values()].map((l,c)=>i._parse(new Y(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,t){return new de({...this._def,minSize:{value:e,message:g.toString(t)}})}max(e,t){return new de({...this._def,maxSize:{value:e,message:g.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}de.create=(r,e)=>new de({valueType:r,minSize:null,maxSize:null,typeName:x.ZodSet,...S(e)});class me extends R{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.function)return m(t,{code:d.invalid_type,expected:p.function,received:t.parsedType}),k;function s(o,l){return Ve({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Qe(),xe].filter(c=>!!c),issueData:{code:d.invalid_arguments,argumentsError:l}})}function n(o,l){return Ve({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Qe(),xe].filter(c=>!!c),issueData:{code:d.invalid_return_type,returnTypeError:l}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;return this._def.returns instanceof ge?V(async(...o)=>{const l=new F([]),c=await this._def.args.parseAsync(o,i).catch(w=>{throw l.addIssue(s(o,w)),l}),f=await a(...c);return await this._def.returns._def.type.parseAsync(f,i).catch(w=>{throw l.addIssue(n(f,w)),l})}):V((...o)=>{const l=this._def.args.safeParse(o,i);if(!l.success)throw new F([s(o,l.error)]);const c=a(...l.data),f=this._def.returns.safeParse(c,i);if(!f.success)throw new F([n(c,f.error)]);return f.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new me({...this._def,args:G.create(e).rest(ue.create())})}returns(e){return new me({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new me({args:e||G.create([]).rest(ue.create()),returns:t||ue.create(),typeName:x.ZodFunction,...S(s)})}}class Te extends R{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Te.create=(r,e)=>new Te({getter:r,typeName:x.ZodLazy,...S(e)});class Ce extends R{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return m(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),k}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ce.create=(r,e)=>new Ce({value:r,typeName:x.ZodLiteral,...S(e)});function Ft(r,e){return new ce({values:r,typeName:x.ZodEnum,...S(e)})}class ce extends R{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return m(t,{expected:O.joinValues(s),received:t.parsedType,code:d.invalid_type}),k}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),s=this._def.values;return m(t,{received:t.data,code:d.invalid_enum_value,options:s}),k}return V(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return ce.create(e)}exclude(e){return ce.create(this.options.filter(t=>!e.includes(t)))}}ce.create=Ft;class je extends R{_parse(e){const t=O.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==p.string&&s.parsedType!==p.number){const n=O.objectValues(t);return m(s,{expected:O.joinValues(n),received:s.parsedType,code:d.invalid_type}),k}if(t.indexOf(e.data)===-1){const n=O.objectValues(t);return m(s,{received:s.data,code:d.invalid_enum_value,options:n}),k}return V(e.data)}get enum(){return this._def.values}}je.create=(r,e)=>new je({values:r,typeName:x.ZodNativeEnum,...S(e)});class ge extends R{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==p.promise&&t.common.async===!1)return m(t,{code:d.invalid_type,expected:p.promise,received:t.parsedType}),k;const s=t.parsedType===p.promise?t.data:Promise.resolve(t.data);return V(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ge.create=(r,e)=>new ge({type:r,typeName:x.ZodPromise,...S(e)});class H extends R{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===x.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null;if(n.type==="preprocess"){const a=n.transform(s.data);return s.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:s.path,parent:s})):this._def.schema._parseSync({data:a,path:s.path,parent:s})}const i={addIssue:a=>{m(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="refinement"){const a=o=>{const l=n.refinement(o,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?k:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?k:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Ue(a))return a;const o=n.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>Ue(a)?Promise.resolve(n.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);O.assertNever(n)}}H.create=(r,e,t)=>new H({schema:r,typeName:x.ZodEffects,effect:e,...S(t)});H.createWithPreprocess=(r,e,t)=>new H({schema:e,effect:{type:"preprocess",transform:r},typeName:x.ZodEffects,...S(t)});class te extends R{_parse(e){return this._getType(e)===p.undefined?V(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}te.create=(r,e)=>new te({innerType:r,typeName:x.ZodOptional,...S(e)});class fe extends R{_parse(e){return this._getType(e)===p.null?V(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fe.create=(r,e)=>new fe({innerType:r,typeName:x.ZodNullable,...S(e)});class Ie extends R{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===p.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ie.create=(r,e)=>new Ie({innerType:r,typeName:x.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...S(e)});class Fe extends R{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return $e(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new F(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new F(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Fe.create=(r,e)=>new Fe({innerType:r,typeName:x.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...S(e)});class We extends R{_parse(e){if(this._getType(e)!==p.nan){const s=this._getOrReturnCtx(e);return m(s,{code:d.invalid_type,expected:p.nan,received:s.parsedType}),k}return{status:"valid",value:e.data}}}We.create=r=>new We({typeName:x.ZodNaN,...S(r)});const Xr=Symbol("zod_brand");class Wt extends R{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ne extends R{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?k:i.status==="dirty"?(t.dirty(),qt(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?k:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new Ne({in:e,out:t,typeName:x.ZodPipeline})}}const Ht=(r,e={},t)=>r?ve.create().superRefine((s,n)=>{var i,a;if(!r(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(a=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):ve.create(),es={object:A.lazycreate};var x;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline"})(x||(x={}));const ts=(r,e={message:`Input not instance of ${r.name}`})=>Ht(t=>t instanceof r,e),Jt=q.create,Kt=ae.create,rs=We.create,ss=oe.create,Yt=ke.create,ns=le.create,is=Be.create,as=we.create,os=Se.create,cs=ve.create,us=ue.create,ls=re.create,ds=ze.create,fs=W.create,hs=A.create,ps=A.strictCreate,ms=Re.create,ys=He.create,vs=Ee.create,gs=G.create,_s=Oe.create,bs=qe.create,xs=de.create,ks=me.create,ws=Te.create,Ss=Ce.create,Rs=ce.create,Es=je.create,Os=ge.create,Rt=H.create,Ts=te.create,Cs=fe.create,js=H.createWithPreprocess,Is=Ne.create,Ns=()=>Jt().optional(),Zs=()=>Kt().optional(),As=()=>Yt().optional(),Ms={string:r=>q.create({...r,coerce:!0}),number:r=>ae.create({...r,coerce:!0}),boolean:r=>ke.create({...r,coerce:!0}),bigint:r=>oe.create({...r,coerce:!0}),date:r=>le.create({...r,coerce:!0})},Ps=k;var N=Object.freeze({__proto__:null,defaultErrorMap:xe,setErrorMap:Vr,getErrorMap:Qe,makeIssue:Ve,EMPTY_PATH:Ur,addIssueToContext:m,ParseStatus:Q,INVALID:k,DIRTY:qt,OK:V,isAborted:ot,isDirty:ct,isValid:Ue,isAsync:$e,get util(){return O},get objectUtil(){return at},ZodParsedType:p,getParsedType:ne,ZodType:R,ZodString:q,ZodNumber:ae,ZodBigInt:oe,ZodBoolean:ke,ZodDate:le,ZodSymbol:Be,ZodUndefined:we,ZodNull:Se,ZodAny:ve,ZodUnknown:ue,ZodNever:re,ZodVoid:ze,ZodArray:W,ZodObject:A,ZodUnion:Re,ZodDiscriminatedUnion:He,ZodIntersection:Ee,ZodTuple:G,ZodRecord:Oe,ZodMap:qe,ZodSet:de,ZodFunction:me,ZodLazy:Te,ZodLiteral:Ce,ZodEnum:ce,ZodNativeEnum:je,ZodPromise:ge,ZodEffects:H,ZodTransformer:H,ZodOptional:te,ZodNullable:fe,ZodDefault:Ie,ZodCatch:Fe,ZodNaN:We,BRAND:Xr,ZodBranded:Wt,ZodPipeline:Ne,custom:Ht,Schema:R,ZodSchema:R,late:es,get ZodFirstPartyTypeKind(){return x},coerce:Ms,any:cs,array:fs,bigint:ss,boolean:Yt,date:ns,discriminatedUnion:ys,effect:Rt,enum:Rs,function:ks,instanceof:ts,intersection:vs,lazy:ws,literal:Ss,map:bs,nan:rs,nativeEnum:Es,never:ls,null:os,nullable:Cs,number:Kt,object:hs,oboolean:As,onumber:Zs,optional:Ts,ostring:Ns,pipeline:Is,preprocess:js,promise:Os,record:_s,set:xs,strictObject:ps,string:Jt,symbol:is,transformer:Rt,tuple:gs,undefined:as,union:ms,unknown:us,void:ds,NEVER:Ps,ZodIssueCode:d,quotelessJson:Qr,ZodError:F});const Ds=N.array(N.number()).default([]),Ls=N.object({id:N.number(),deleted:N.boolean().optional().default(!1),type:N.string(),by:N.string().optional().default(""),time:N.number().optional(),dead:N.boolean().optional().default(!1),kids:N.array(N.number()).optional().default([]),descendants:N.number().optional(),score:N.number().optional(),title:N.string().optional().default(""),url:N.string().optional().default("")}),Qs=N.object({id:N.number(),deleted:N.boolean().optional().default(!1),type:N.string(),by:N.string().optional().default(""),time:N.number().optional(),kids:N.array(N.number()).optional().default([]),parent:N.number().optional(),text:N.string().optional().default("")}),Vs=Ls.merge(Qs),Us=async()=>{const r=await fetch("https://hacker-news.firebaseio.com/v0/topstories.json");return r.status!==200?Promise.reject(`Failed to fetch top stories res.status:${r.status}`):r.json().then(e=>{const t=Ds.safeParse(e);return t.success?t.data:Promise.reject(`Failed to parse top stories json:${e}`)})},Gt=async r=>{const e=await fetch(`https://hacker-news.firebaseio.com/v0/item/${r}.json`);return e.status!==200?Promise.reject(`Failed to fetch item ${r} res.status:${e.status}`):e.json().then(t=>{const s=Vs.safeParse(t);return s.success?s.data:Promise.reject(`Failed to parse item itemID:${r} json:${t}`)})},_e={maxPageItems:9,maxCommentsPerPage:20,hackerNewsStoryContentAtom:jr({})},$s=({data:r,page:e})=>{const t=qs(r.id),[s,n]=er(e,_e.maxCommentsPerPage,r.kids);return{totalPages:s,originPostData:t,kidsQueries:n}},Bs=({page:r})=>{const e=zs(),[t,s]=er(r,_e.maxPageItems,e.data);return[t,s]},zs=()=>Ut({queryKey:["topStories"],queryFn:Us,cacheTime:12*5*60*1e3,staleTime:6*5*60*1e3}),qs=(r,e=!1)=>Ut({queryKey:["item",r],queryFn:()=>Gt(r),cacheTime:6*5*60*1e3,staleTime:3*5*60*1e3,suspense:e,enabled:!!r}),Xt=(r=[])=>Or({queries:r.map(e=>({queryKey:["item",e],queryFn:()=>Gt(e),cacheTime:6*5*60*1e3,staleTime:3*5*60*1e3}))}),er=(r,e,t=[])=>{const s=Math.floor(t.length/e),n=t.length%e,i=n===0?s:s+1;let a=e;r>i?a=0:r==i&&(a=n);const o=t.slice(0,(r-1)*e+a);return[i,Xt(o)]};function tr(r){if(r===void 0)return"";const e=Date.now();return Fs(e,r)}function Fs(r,e){const t=Math.floor(r/1e3-e);let s=t/31536e3;return s>1?Math.floor(s)+" years":(s=t/2592e3,s>1?Math.floor(s)+" months":(s=t/86400,s>1?Math.floor(s)+" days":(s=t/3600,s>1?Math.floor(s)+" hrs":(s=t/60,s>1?Math.floor(s)+" mins":Math.floor(t)+" secs"))))}var Ws="Expected a function",Et=0/0,Hs="[object Symbol]",Js=/^\s+|\s+$/g,Ks=/^[-+]0x[0-9a-f]+$/i,Ys=/^0b[01]+$/i,Gs=/^0o[0-7]+$/i,Xs=parseInt,en=typeof Ae=="object"&&Ae&&Ae.Object===Object&&Ae,tn=typeof self=="object"&&self&&self.Object===Object&&self,rn=en||tn||Function("return this")(),sn=Object.prototype,nn=sn.toString,an=Math.max,on=Math.min,tt=function(){return rn.Date.now()};function cn(r,e,t){var s,n,i,a,o,l,c=0,f=!1,h=!1,w=!0;if(typeof r!="function")throw new TypeError(Ws);e=Ot(e)||0,lt(t)&&(f=!!t.leading,h="maxWait"in t,i=h?an(Ot(t.maxWait)||0,e):i,w="trailing"in t?!!t.trailing:w);function C(j){var B=s,u=n;return s=n=void 0,c=j,a=r.apply(u,B),a}function P(j){return c=j,o=setTimeout(J,e),f?C(j):a}function z(j){var B=j-l,u=j-c,y=e-B;return h?on(y,i-u):y}function D(j){var B=j-l,u=j-c;return l===void 0||B>=e||B<0||h&&u>=i}function J(){var j=tt();if(D(j))return K(j);o=setTimeout(J,z(j))}function K(j){return o=void 0,w&&s?C(j):(s=n=void 0,a)}function L(){o!==void 0&&clearTimeout(o),c=0,s=l=n=o=void 0}function X(){return o===void 0?a:K(tt())}function ee(){var j=tt(),B=D(j);if(s=arguments,n=this,l=j,B){if(o===void 0)return P(l);if(h)return o=setTimeout(J,e),C(l)}return o===void 0&&(o=setTimeout(J,e)),a}return ee.cancel=L,ee.flush=X,ee}function lt(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function un(r){return!!r&&typeof r=="object"}function ln(r){return typeof r=="symbol"||un(r)&&nn.call(r)==Hs}function Ot(r){if(typeof r=="number")return r;if(ln(r))return Et;if(lt(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=lt(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(Js,"");var t=Ys.test(r);return t||Gs.test(r)?Xs(r.slice(2),t?2:8):Ks.test(r)?Et:+r}var dn=cn,fn=function(e,t,s){return e?dn(t,e,s):t};function rr(r,e){var t=I.useMemo(function(){var f,h,w,C;return{offset:(f=e==null?void 0:e.offset)!=null?f:0,debounce:(h=e==null?void 0:e.debounce)!=null?h:200,debounceOptions:(w=e==null?void 0:e.debounceOptions)!=null?w:{leading:!0},triggerOnNoScroll:(C=e==null?void 0:e.triggerOnNoScroll)!=null?C:!1}},[e==null?void 0:e.offset,e==null?void 0:e.debounce,e==null?void 0:e.debounceOptions,e==null?void 0:e.triggerOnNoScroll]),s=t.offset,n=t.triggerOnNoScroll,i=t.debounce,a=t.debounceOptions,o=I.useMemo(function(){return fn(i,r,a)},[i,r]),l=I.useRef(null),c=I.useCallback(function(){if(l.current!=null){var f=l.current,h=Math.round(f.scrollTop+f.clientHeight),w=Math.round(f.scrollHeight-s);w<=h&&o()}else{var C=document.scrollingElement||document.documentElement,P=Math.round(C.scrollTop+window.innerHeight),z=Math.round(C.scrollHeight-s);z<=P&&o()}},[s,r,l.current]);return I.useEffect(function(){var f=l.current;return f!=null?f.addEventListener("scroll",c):window.addEventListener("scroll",c),n&&c(),function(){f!=null?f.removeEventListener("scroll",c):window.removeEventListener("scroll",c)}},[c,i]),l}function hn(){const[r,e]=I.useState(1),[t,s]=Bs({page:r}),n=rr(()=>{e(i=>i<t?i+1:i)},{offset:20,debounce:300,triggerOnNoScroll:!0});return b.jsxs("div",{ref:n,className:"list-scroller w-full h-full overflow-y-scroll",children:[s.map((i,a)=>b.jsx(pn,{item:i},a)),b.jsx("div",{className:"bottom-1 w-full h-[1px]"})]})}function pn({item:r}){const e=Bt(_e.hackerNewsStoryContentAtom)[1],{status:t,error:s,data:n}=r;return t==="loading"?b.jsx("div",{className:"bg-gray-900 text-gray-200 pl-8 pr-2",children:"Item Loading..."}):t==="error"?b.jsxs("div",{children:["Item Error: ",JSON.stringify(s)]}):(n==null?void 0:n.type)==="story"?b.jsx(mn,{item:n,onClick:()=>e(n)}):b.jsx(b.Fragment,{})}function mn(r){const{item:e,onClick:t}=r,s=e.kids;let n=Math.floor(s.length/_e.maxCommentsPerPage)+(s.length%_e.maxCommentsPerPage>0?1:0);const i=n<=1?"1 page":`${n} pages`;return b.jsxs("div",{className:"bg-gray-900 text-gray-200 pl-8 pr-2 cursor-pointer",onClick:t,children:[b.jsxs("div",{className:"w-full inline-block py-2",children:[b.jsxs("div",{className:"float-left",children:[b.jsxs("span",{className:"text-blue-400",children:[e.by," "]}),b.jsxs("span",{className:"",children:[tr(e.time)," "]}),b.jsxs("span",{children:["🖒",e.score??""]})]}),b.jsxs("span",{className:"float-right",children:[" ",i]})]}),b.jsx("div",{className:"pb-4 border-b-2 border-gray-200",children:b.jsxs("span",{className:"inline-block w-full text-left text-xl text-gray-100",children:[e.title," ",b.jsx("a",{href:`${e.url}`,target:"_blank",title:`${e.url}`,children:"🔗"})]})})]})}function yn(){const[r,e]=I.useState(1),t=Bt(_e.hackerNewsStoryContentAtom)[0],{totalPages:s,originPostData:n,kidsQueries:i}=$s({data:t,page:r}),a=rr(()=>{e(o=>o<s?o+1:o)},{offset:20,debounce:300,triggerOnNoScroll:!0});return b.jsx("div",{ref:a,className:"bg-gray-900 text-gray-200 p-2 h-full overflow-y-scroll",children:b.jsxs("div",{children:[b.jsx(dt,{queryResult:n,floor:1},1),i.map((o,l)=>b.jsx(dt,{queryResult:o,floor:l+2},l+2))]})})}function dt(r){const[e,t]=I.useState(!1),{queryResult:s,floor:n}=r;if(s.status==="loading")return b.jsx("div",{children:"Loading..."});if(s.status==="error")return b.jsxs("div",{children:["Error: ",JSON.stringify(s.error)]});const{by:i,time:a,text:o,kids:l}=s.data;return i===""?b.jsx("div",{}):b.jsxs("div",{className:"bg-gray-800 text-gray-200 px-2 my-2 py-1",children:[b.jsxs("div",{className:"flex",children:[n!=null?b.jsxs("div",{children:["#",n," "]}):b.jsx("div",{}),b.jsx("div",{className:"text-blue-400",children:i})," ",b.jsx("div",{children:tr(a)}),b.jsx("div",{children:n!=1&&l!=null&&l.length>0&&b.jsx("button",{className:"px-2",onClick:()=>t(!e),children:" ▾"})})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-left mb-3",dangerouslySetInnerHTML:{__html:o}}),b.jsx("div",{className:"pl-4",children:n!=1&&b.jsx(I.Suspense,{fallback:b.jsx(b.Fragment,{}),children:e&&b.jsx(vn,{kids:l})})})]})]})}function vn({kids:r}){const e=Xt(r);return b.jsx(b.Fragment,{children:e.map((t,s)=>b.jsx(dt,{queryResult:t},s))})}function _n(){return b.jsxs("div",{className:"flex w-full h-screen",children:[b.jsx("div",{className:"shrink-0 w-[28rem] h-full",children:b.jsx(hn,{})}),b.jsx("div",{className:"grow",children:b.jsx(yn,{})})]})}export{_n as default};
