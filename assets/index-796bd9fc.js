import{r as l,j as a,P as g}from"./index-7a7837c6.js";import{i as u,L as h}from"./ImageData-69f480c7.js";const b=[{id:0,h:"10rem",bg:"rgb(105, 64, 231)"},{id:1,h:"12rem",bg:"rgb(196, 178, 87)"},{id:2,h:"17rem",bg:"rgb(98, 187, 137)"},{id:3,h:"14rem",bg:"rgb(223, 19, 67)"},{id:4,h:"12rem",bg:"rgb(223, 125, 80)"},{id:5,h:"15rem",bg:"rgb(67, 240, 87)"},{id:6,h:"22rem",bg:"rgb(48, 199, 149)"},{id:7,h:"17rem",bg:"rgb(90, 113, 87)"},{id:8,h:"18rem",bg:"rgb(84, 222, 49)"},{id:9,h:"14rem",bg:"rgb(189, 44, 70)"}],x={images:b};function p(o){const[t,s]=l.useState(o??[]),[i,d]=l.useState();return l.useEffect(()=>{const e=t.map(n=>({ref:n.ref,br:n.ref.current.getBoundingClientRect()}));i&&e&&i.forEach(n=>{const r=e.find(c=>c.ref.current===n.ref.current);if(r){const c=r.ref.current,m=n.br.left-r.br.left,f=n.br.top-r.br.top;c&&(m!==0||f!==0)&&(c.style.transform=`translate(${m}px, ${f}px)`,c.style.transition="transform 0s",requestAnimationFrame(()=>{c.style.transform="",c.style.transition="transform 500ms"}))}})},[t,i]),l.useEffect(()=>{if(t.every(e=>e.ref.current)){const e=t.map(n=>({ref:n.ref,br:n.ref.current.getBoundingClientRect()}));d(e)}},[t]),[t,s]}function M(){const[o,t]=p(x.images.map(e=>({...e,ref:l.createRef()}))),[s,i]=l.useState(!1),d=l.useCallback(()=>{if(s)return;i(!0);const e=Math.max(...o.map(r=>r.id)),n=[];for(let r=0;r<5;r++)n.push(j(e+r));setTimeout(()=>{i(!1),t([...o,...n])},1e3)},[o,s,t]);return l.useEffect(()=>{const e=document.querySelector(".scroller"),n=c=>{if(!(!e||e.scrollHeight<=e.clientHeight))for(const m of c)m.isIntersecting&&d()},r=new IntersectionObserver(n,{root:e,threshold:0});return r==null||r.observe(e==null?void 0:e.lastChild),()=>{r==null||r.unobserve(e==null?void 0:e.lastChild),r==null||r.disconnect()}},[o,s,d]),a.jsxs("div",{children:[a.jsx("p",{className:"text-center",children:"masonry in grid layout only implemented by firefox"}),a.jsxs("div",{className:"flex gap-x-4 justify-center my-6",children:[a.jsx("button",{type:"button",className:"bg-slate-700 rounded-full py-2 px-8 text-white",onClick:()=>{t(y(o))},children:"Randomize"}),a.jsx("button",{type:"button",className:"bg-red-500 rounded-full py-2 px-8 text-white",onClick:d,children:"Add 5"})]}),a.jsxs("div",{className:"scroller w-full max-h-[50rem] relative overflow-y-scroll no-scrollbar bg-gray-200 bg-opacity-10 rounded-md",children:[s&&a.jsx("div",{className:"sticky top-0 w-full h-12 leading-[3rem] backdrop-blur text-center text-white font-bold text-lg z-20",children:"Loading"}),a.jsx("div",{className:`scroller-item columns-3 sm:columns-4 gap-2 w-full rounded-md p-6 ${s?"mt-[-3rem]":""}`,children:o.map(e=>{const n=`${u[e.id%u.length]}?sig=masonry-${e.id}`;return a.jsx("div",{ref:e.ref,className:"flex justify-center items-center relative mb-2 hover:scale-110 hover:z-10 cursor-pointer",style:{height:`${e.h}`},children:a.jsx(l.Suspense,{fallback:a.jsx("div",{className:"w-full h-full flex justify-center items-center",style:{background:`${e.bg}`},children:a.jsx(g,{})}),children:a.jsx(h,{className:"w-full h-full object-cover",src:n,height:"100%",width:"100%"})})},e.id)})}),a.jsx("div",{className:"w-full h-[1px]"})]})]})}function y(o){const t=[...o];for(let s=0;s<t.length-1;s++){const i=s+Math.floor(Math.random()*(t.length-s)),d=t[i];t[i]=t[s],t[s]=d}return t}function j(o){const t=`${Math.floor(Math.random()*11)+8}rem`,s=`rgb(${Math.floor(Math.random()*256)}, ${Math.floor(Math.random()*256)}, ${Math.floor(Math.random()*256)})`;return{id:o+1,h:t,bg:s,ref:l.createRef()}}export{M as default};
